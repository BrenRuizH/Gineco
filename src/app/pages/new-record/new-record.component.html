<div class="page-wrapper">
    <div class="container-fluid animated fadeIn">
        <div class="row page-titles">
            <div class="col-md-5 align-self-center">
                <h3 class="text-themecolor">Datos del paciente</h3>
            </div>                
        </div>
        <div class="row">            
            <div class="col-12">                
                <form>
                    <div>
                        <div class="form-group row">
                            <label for="example-text-input" class="col-2 col-form-label">Nombre</label>
                            <div class="col-5">
                                <select class="form-control" name="idpaciente" [(ngModel)]="newhistorial.idpaciente">
                                    <option value="" disabled >Seleccione un nombre</option>
                                    <option *ngFor="let data of patients" value="{{data.idpaciente}}">{{data.nompaciente}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="example-search-input" class="col-2 col-form-label">Peso</label>
                            <div class="col-4">
                                <input class="form-control" type="text" name="pesohistorial" [(ngModel)]="newhistorial.pesohistorial">
                            </div>
                            <label for="example-search-input" class="col-2 col-form-label">Talla</label>
                            <div class="col-4">
                                <input class="form-control" type="text" name="tallahistorial" [(ngModel)]="newhistorial.tallahistorial">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="example-search-input" class="col-2 col-form-label">FrC</label>
                            <div class="col-4">
                                <input class="form-control" type="text" name="fchistorial" [(ngModel)]="newhistorial.fchistorial">
                            </div>
                            <label for="example-search-input" class="col-2 col-form-label">Temperatura</label>
                            <div class="col-4">
                                <input class="form-control" type="text" name="frhistorial" [(ngModel)]="newhistorial.frhistorial">
                            </div>
                        </div>
                        <div class="form-group row">
                            <button type="button" (click)="mostrar=!mostrar" class=" btn btn-outline-primary">Mostrar Mas Datos</button>
                        </div>
                        <div *ngIf="mostrar">
                            <div class="form-group row">
                                <label for="example-search-input" class="col-10 col-form-label">ANTECEDENTES HEREDOFAMILIARES</label>
                                <div class="col-12">
                                    <input class="form-control" type="text" name="ahhistorial" [(ngModel)]="newhistorial.ahhistorial">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="example-search-input" class="col-10 col-form-label">ANTECEDENTES PERSONALES NO PATOLOGICOS</label>
                                <div class="col-12">
                                    <input class="form-control" type="text" name="apnphistorial" [(ngModel)]="newhistorial.apnphistorial">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="example-search-input" class="col-10 col-form-label">HEMOTIPO</label>
                                <div class="col-12">
                                    <input class="form-control" type="text" name="hemotipohistorial" [(ngModel)]="newhistorial.hemotipohistorial">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="example-search-input" class="col-10 col-form-label">ALERGIAS</label>
                                <div class="col-12">
                                    <input class="form-control" type="text" name="alergiashistorial" [(ngModel)]="newhistorial.alergiashistorial">
                                </div>
                            </div>
                            <div class="form-group">
                                <label>ANTECEDENTES PERSONALES PATOLOGICOS</label>
                                <textarea class="form-control" rows="4" name="apphistorial" [(ngModel)]="newhistorial.apphistorial"></textarea>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="example-search-input" class="col-2 col-form-label">CITA PROXIMA</label>
                            <div class="col-10">
                                <input class="form-control" type="text" name="citahistorial" [(ngModel)]="newhistorial.citahistorial">
                            </div>
                        </div>      
                        <div class="form-group">
                            <label>TRATAMIENTO</label>
                            <textarea class="form-control" rows="8" name="diagnostico" [(ngModel)]="newhistorial.diagnostico"></textarea>
                            <div class="col-md-12 mt-5 d-flex justify-content-center">
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label">Imagen (JPG, PNG, WEBP O JPEG)</label>
                                    <div class="card">
                                        <div class="card-body">
                                            <input type="file" id="input-file-now" class="dropify" (change)="fileChangeEvent($event)" accept=".png, jpg, jpeg, webp" />
                                        </div>
                                    </div>
                                </div>
                            </div>                                                                                   
                        </div>                                              
                        <div class="form-group row">
                            <div class="col-md-12">
                                <div class="row">    
                                    <div class="col-md-12 mb-5 d-flex justify-content-center">
                                        <div class="btn-group" role="group">
                                            <button type="button" (click)="rotate()" class="btn btn-outline-primary" [ngClass]="rotateStatus ? 'active': ''">Rotar</button>
                                            <button type="button" (click)="flipHorizontal()" class="btn btn-outline-primary" [ngClass]="flipHorizontalStatus ? 'active': ''">Horizontal</button>
                                            <button type="button" (click)="flipVertical()" class="btn btn-outline-primary" [ngClass]="flipVerticalStatus ? 'active': ''">Vertical</button>
                                            <button type="button" class="btn btn-outline-danger">Sin Cambios</button>
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-5 d-flex justify-content-center" *ngIf="imageChangedEvent">
                                        <image-cropper
                                        [imageChangedEvent]="imageChangedEvent"
                                        [maintainAspectRatio]="true"
                                        [aspectRatio]="1 / 1"
                                        format="png"
                                        [containWithinAspectRatio]="true"
                                        [cropperMinWidth]="5"
                                        [cropperMinHeight]="5"
                                        [canvasRotation]="0"
                                        (imageCropped)="imageCropped($event)"
                                        [hideResizeSquares]="false"
                                        [transform]="transform">
                                    </image-cropper>
                                    </div>                                                            
                                    <div class="col-md-6 mb-5 d-flex justify-content-center">
                                        <img [src]="croppedImage" 
                                        *ngIf="imageChangedEvent"
                                        class="img-fluid" />
                                    </div>                               
                                </div>
                            </div>     
                            <button type="button" (click)="altaHistorial()" class="btn btn-primary" >Registrar historial</button>                                                                              
                        </div> 
                    </div>                     
                </form>
            </div>
        </div>            
    </div>
</div>
